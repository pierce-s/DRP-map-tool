<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Hagga Basin Map Tool</title>

<link rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-Vk614WB2ryqjTiGOGbTV+EGX1kpSerY25/hzp8aAikM="
      crossorigin=""/>

<style>
  html,body { margin:0; height:100%; }
  #map     { width:100%; height:100%; }
  #readout {
    position:absolute; top:8px; left:8px;
    background:#fff; padding:4px 8px; font:14px monospace;
    border-radius:4px; pointer-events:none;
  }
</style>
</head>
<body>

<div id="map"></div>
<div id="readout">X: – , Y: –</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-p8k8cqk4RD7Ck1a8Ze2Fj8dQ1AR9bVRD1Hrsq5j0CJo="
        crossorigin=""></script>

<script>
/* hard-code the image’s natural pixel dimensions */
const imgW = 1042;              /* width  in px */
const imgH = 1041;              /* height in px */

/* Leaflet uses y,x – the origin is top-left for CRS.Simple */
const bounds = [[0,0],[imgH,imgW]];

const map = L.map('map',{
  crs: L.CRS.Simple,
  minZoom: -2,           /* allow zooming out a bit */
  maxZoom: 4,
  attributionControl:false,
  zoomControl:true
});

L.imageOverlay('hagga-basin.png', bounds).addTo(map);
map.fitBounds(bounds);

let pin = null;
const readout = document.getElementById('readout');

function showCoords(latlng){
  const x = latlng.lng.toFixed(1);
  const y = latlng.lat.toFixed(1);
  readout.textContent = `X: ${x} , Y: ${y}`;
}

/* click without drag places or moves the marker */
map.on('click', e=>{
  if (!pin){
    pin = L.marker(e.latlng,{draggable:true}).addTo(map);
    pin.on('drag', ev=>showCoords(ev.latlng));
  }else{
    pin.setLatLng(e.latlng);
  }
  showCoords(e.latlng);
});
</script>
</body>
</html>
